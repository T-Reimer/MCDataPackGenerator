let project = require("projects");

class ProjectFile{
    constructor(name){
        this.setup();
        const that = this;

        // load the file
        project.load(name).then(function(data){
            console.log(data);
            that.file = data;
        }).catch(function(){
            // then this is a new file
            console.log("New File");
            that.file.name = name;
            that.save();
        });
        console.log(this);
    }

    setup(){
        this.file = {
            name: "",
            data: {}
        };
    }

    /**
     * save the data
     */
    save(){
        console.log("Save File", this.file);
        project.save(this.file);
    }

    get data(){
        return this.file;
    }
}

module.exports = ProjectFile;