Blockly.Blocks['setblock'] = {
    init: function () {
        this.jsonInit({
            "message0": '/setblock %1 block %2 %3',
            "args0": [
                {
                    "type": "input_value",
                    "name": "COORDS",
                    "check": "String"
                },{
                    "type": "input_value",
                    "name": "BLOCK",
                    "check": "String"
                }, {
                    "type": "input_value",
                    "name": "MODE",
                    "check": "String"
                }
            ],
            "previousStatement": "Action",
            "nextStatement": "Action",
            "colour": 160,
            "tooltip": "Set a block at location",
            "helpUrl": "https://minecraft.gamepedia.com/Commands/setblock"
        });
    }
};

Blockly.Functions["setblock"] = function (block) {
    // Search the text for a substring.
    let coords = Blockly.Functions.valueToCode(block, 'COORDS', Blockly.Functions.ORDER_NONE) || "~ ~ ~";

    let blockName = Blockly.Functions.valueToCode(block, 'BLOCK', Blockly.Functions.ORDER_NONE) || "minecraft:stone";

    let mode = Blockly.Functions.valueToCode(block, 'MODE', Blockly.Functions.ORDER_NONE) || "";

    let command = "/setblock " + coords + " " + blockName + " " + mode + "\n";
    return command;
};