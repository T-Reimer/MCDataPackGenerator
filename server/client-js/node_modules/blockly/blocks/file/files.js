const colours = require("blockly/colour");

Blockly.Blocks['files'] = {
    init: function () {
        this.jsonInit({
            "message0": 'Function: %1 .mcfunction',
            "args0": [
                {
                    "type": "field_input",
                    "name": "NAME",
                    "text": ""
                }
            ],
            "message1": "do %1",
            "args1": [
                { "type": "input_statement", "name": "DO" }
            ],
            // "previousStatement": null,
            // "nextStatement": null,
            "colour": colours.functions,
            "tooltip": "Set a block at location",
            "helpUrl": "Creates a new Functions File"
        });
    }
};

Blockly.Functions["files"] = function (block) {
    // Search the text for a substring.
    // let code = Blockly.Functions.valueToCode(block, 'DO', Blockly.Functions.ORDER_NONE) || "";
    let name = block.getFieldValue("NAME");
    let code = `# Starting file ${name}\n`;
    code += Blockly.Functions.statementToCode(block, 'DO');

    return code;
};