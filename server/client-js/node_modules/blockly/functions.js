const Workspace = require("./workspace");

class FunctionsBlockly{

    constructor(file){
        this.Workspace = new Workspace(file);

        let xml = file.file.data.functions.blockly_xml;
        this.Workspace.open(xml);
        
        this.Workspace.on("change", function(workspace, Blockly, xml){
            let code = Blockly.Functions.workspaceToCode(workspace);

            file.setBlocklyData("functions", xml, code);
            console.log(code, file);
        });
        console.log(this);
    }

    close(){
        this.Workspace.close();
    }
}

module.exports = FunctionsBlockly;