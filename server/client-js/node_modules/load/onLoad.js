// run onload of the doc
const project = require("projects");
require("./sidebar");

project.updateVisualList();

window.addEventListener("hashchange", function(){
    onHashChange();
});

function onHashChange(){
    let hash = location.hash;
    if(hash.includes("#project_")){
        let name = decodeURI(hash.replace("#project_", ""));
        console.log(name);
    }
}

$("#new-project-form").on("submit", function(event){
    event.preventDefault();

    project.new($( this ).serializeArray()).then(function(name){
        // open the created project
        project.open(name);
        $('#projectsModal').modal('hide');
    });
});